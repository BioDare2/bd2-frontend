<mat-card *ngIf="user && !user.anonymous">

  <mat-card-title>
  <h3>Edit user: {{user.name}}</h3>
  </mat-card-title>

  <mat-card-content>
  <form #userEditForm="ngForm">

    <div class="form-group">
      <mat-form-field class="w-100">
      <mat-label for="username">Login</mat-label>
      <input matInput #fUsername="ngModel" [ngModel]="user.login" class=""
             disabled
             id="username"
             name="fUsername" type="text"
      >
      </mat-form-field>
    </div>

    <div class="form-group">
      <mat-form-field class="w-100">
      <mat-label for="email">Email</mat-label>
      <input matInput #fEmail="ngModel" [(ngModel)]="email" class=""
             id="email"
             name="fEmail"
             placeholder="your email"
             required type="text">
      </mat-form-field>
    </div>
    <div [hidden]="fEmail.pristine || validEmail()" class="alert alert-danger">
      Email is not valid
    </div>

    <div class="form-group">
      <mat-form-field class="w-100">
      <mat-label for="password">Password</mat-label>
      <input matInput #fPassword="ngModel" [(ngModel)]="password"
             class=""
             id="password"
             name="fPassword"
             placeholder="new password or leave empty" type="password">
        <mat-hint>Password must be at least 8 long, containing a digit or symbol or capital letter</mat-hint>
      </mat-form-field>

    </div>
    <div [hidden]="fPassword.pristine || !weakPassword()" class="alert alert-danger">
      Password must be at least 8 long, containing a digit, symbol or cappital letter
    </div>

    <div class="form-group">
      <mat-form-field class="w-100">
      <mat-label for="password2">Repeat password</mat-label>
      <input matInput #fPassword2="ngModel" [(ngModel)]="password2"
             class=""
             id="password2"
             name="fPassword2"
             placeholder="password" type="password">
      </mat-form-field>
    </div>
    <div [hidden]="matching()" class="alert alert-danger">
      Passwords do not match
    </div>

    <div class="form-group">
      <mat-form-field class="w-100">
      <mat-label for="firstName">First Name</mat-label>
      <input matInput #fFirstName="ngModel" [(ngModel)]="firstName" class=""
             id="firstName"
             minlength="2"
             name="fFirstName"
             placeholder="your first name"
             required type="text">
      </mat-form-field>
      <!--<div [hidden]="fFirstName.valid || fFirstName.pristine" class="alert alert-danger">
        First name is required
      </div>-->
    </div>

    <div class="form-group">
      <mat-form-field class="w-100">
      <mat-label for="lastName">Family Name</mat-label>
      <input matInput #fLastName="ngModel" [(ngModel)]="lastName" class=""
             id="lastName"
             minlength="3"
             name="fLastName"
             placeholder="your surname"
             required type="text">
      </mat-form-field>
      <!--<div [hidden]="fLastName.valid || fLastName.pristine" class="alert alert-danger">
        Last name is required
      </div>-->
    </div>

    <div class="form-group">
      <mat-form-field class="w-100">
      <mat-label for="institution">Institution</mat-label>
      <input matInput #fInstitution="ngModel" [(ngModel)]="institution" class=""
             id="institution"
             name="fInstitution"
             placeholder="e.g. University of Edinburgh"
             required type="text">
      </mat-form-field>
      <!--<div [hidden]="fInstitution.valid || fInstitution.pristine" class="alert alert-danger">
        Institution name is required
      </div>-->
    </div>

    <div class="form-group">
      <mat-form-field class="w-100">
      <mat-label for="password">Your current password</mat-label>
      <input matInput #fCurrentPassword="ngModel" [(ngModel)]="currentPassword" class=""
             id="currentPassword"
             name="fCurrentPassword"
             placeholder="current password"
             required type="password">
      </mat-form-field>
    </div>

    <button (click)="save()" [disabled]="!userEditForm.form.valid ||
     !validEmail() || passwordProblem() " class="btn btn-primary" type="submit">Save
    </button>

  </form>
  </mat-card-content>

</mat-card>
