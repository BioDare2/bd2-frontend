
<mat-vertical-stepper [linear]="true" #stepper>

  <mat-step >
      <ng-template matStepLabel>Upload data file</ng-template>

      <bd2-upload-data-file-step (uploadFiles)="upload($event)"></bd2-upload-data-file-step>
  </mat-step>


  <mat-step >
    <form >
      <ng-template matStepLabel>Data layout</ng-template>
      <mat-divider></mat-divider>

      <bd2-import-details-summary [importDetails]="importDetails"></bd2-import-details-summary>

      <mat-card class="mat-elevation-z4">
        <mat-card-content>
          <mat-radio-group [(ngModel)]="importDetails.inRows" name="inRows" class="spaced">
            <mat-radio-button [value]="true" >Data in rows</mat-radio-button>
            <mat-radio-button [value]="false" >Data in columns</mat-radio-button>
          </mat-radio-group>
        </mat-card-content>
        <mat-card-actions>
          <button mat-button matStepperPrevious>Back</button>
          <button mat-button matStepperNext type="button" (click)="loadData(defineTimeStep)">Next</button>
        </mat-card-actions>
      </mat-card>


    </form>
  </mat-step>


  <mat-step [completed]="importDetails.isTimeDefined()">
    <ng-template matStepLabel>Define time {{importDetails.inLabel}}</ng-template>
    <mat-divider></mat-divider>
    <bd2-import-details-summary [importDetails]="importDetails"></bd2-import-details-summary>

    <bd2-define-time-step [importDetails]="importDetails" #defineTimeStep></bd2-define-time-step>

    <div>
      <button mat-button matStepperPrevious>Back</button>
      <button mat-button matStepperNext type="button" [disabled]="!importDetails.isTimeDefined()">Next</button>
      <!--<button mat-button (click)="stepper.reset()">Reset</button> -->
    </div>
  </mat-step>


  <mat-step >
    <form >
      <ng-template matStepLabel>Labelling options</ng-template>
      <mat-divider></mat-divider>

      <bd2-import-details-summary [importDetails]="importDetails" [showTime]="true"></bd2-import-details-summary>

      <mat-card class="mat-elevation-z4">
        <mat-card-content>
          <mat-radio-group [(ngModel)]="importDetails.importLabels" name="importLabels" class="spaced">
            <mat-radio-button [value]="true" >Import labels from {{importDetails.inLabelNeg}}</mat-radio-button>
            <mat-radio-button [value]="false" disabled>Manually label</mat-radio-button>
          </mat-radio-group>
        </mat-card-content>
        <mat-card-actions>
          <button mat-button matStepperPrevious>Back</button>
          <button mat-button matStepperNext type="button" (click)="loadData(importLabelsStep)">Next</button>
        </mat-card-actions>
      </mat-card>


    </form>
  </mat-step>

  <mat-step [completed]="importDetails.areLabelsCorrectlySelected()">
    <ng-template *ngIf="importDetails.importLabels" matStepLabel>Select labels {{importDetails.inLabelNeg}}</ng-template>
    <ng-template *ngIf="!importDetails.importLabels" matStepLabel>Label data</ng-template>
    <mat-divider></mat-divider>
    <bd2-import-details-summary [importDetails]="importDetails" [showTime]="true" ></bd2-import-details-summary>

    <bd2-import-labels-step [importDetails]="importDetails" #importLabelsStep></bd2-import-labels-step>

    <div>
      <button mat-button matStepperPrevious>Back</button>
      <button mat-button matStepperNext type="button"
              [disabled]="!importDetails.areLabelsCorrectlySelected()"
              (click)="loadData(selectDataStartStep)"
      >Next</button>
    </div>
  </mat-step>

  <mat-step [completed]="importDetails.isDataStartCorrectlySelected()">
    <ng-template matStepLabel>Select data start</ng-template>
    <mat-divider></mat-divider>
    <bd2-import-details-summary [importDetails]="importDetails" [showTime]="true" [showLabelling]="true" ></bd2-import-details-summary>

    <bd2-select-data-start-step [importDetails]="importDetails" #selectDataStartStep></bd2-select-data-start-step>

    <div>
      <button mat-button matStepperPrevious>Back</button>
      <button mat-button matStepperNext type="button" [disabled]="!importDetails.isDataStartCorrectlySelected()">Next</button>
      <!--<button mat-button (click)="stepper.reset()">Reset</button> -->
    </div>
  </mat-step>



  <mat-step>
    <ng-template matStepLabel>Import timeseries</ng-template>
    <mat-divider></mat-divider>
    <bd2-import-details-summary [importDetails]="importDetails" [showTime]="true" [showLabelling]="true"
                                [showDataStart]="true"></bd2-import-details-summary>

    <mat-card class="mat-elevation-z4">
      <mat-card-content>
        <alert type="info">You can now import the timeseries</alert>
        {{ importDetails | json}}
      </mat-card-content>
    </mat-card>

    <div>
      <button mat-button matStepperPrevious>Back</button>
      <button mat-button (click)="importData()">Import data</button>
    </div>
  </mat-step>

</mat-vertical-stepper>

